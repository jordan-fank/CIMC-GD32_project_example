# ACE MCP 完整使用教程

## 📖 ACE MCP 是什么？

ACE MCP (Augment Context Engine Model Context Protocol) 是一个**代码库智能索引和语义搜索工具**。简单来说，它就像给你的代码库装上了"大脑"，能够理解你的代码内容并根据自然语言描述快速找到相关代码。

## 🎯 核心功能

### 1. **智能代码索引**
- 自动扫描你的项目文件
- 理解代码的语义和上下文关系
- 增量更新：只索引有变化的文件，效率很高

### 2. **自然语言搜索**
- 可以用普通话描述你要找的功能
- 例如："搜索LED控制相关的代码"、"查找WebSocket通信的实现"
- 系统会理解你的意图并找到最相关的代码片段

### 3. **多编码支持**
- 支持UTF-8、GBK、GB2312等多种编码
- 对中文项目特别友好

### 4. **Web管理界面** (可选)
- 提供可视化的管理界面
- 可以查看索引状态和搜索历史

## 🚀 日常使用方法

### **简单来说：直接使用，无需重新配置！**

你已经配置完成，日常使用按以下步骤：

#### 1. **直接向Claude提问**
```
搜索项目中所有与LED控制相关的代码
```
```
查找4G通信模块的实现
```
```
搜索WebSocket协议处理的具体代码
```
```
查找GD32芯片的HAL初始化相关函数
```

#### 2. **Claude会自动调用ACE MCP**
- 系统会自动在后台搜索你的代码库
- 返回最相关的代码文件和具体实现
- 提供代码位置和详细说明

## 🎭 使用场景示例

### **场景1：代码理解**
当你接手一个新项目或需要理解某个功能时：
```
我想了解这个项目中LED是如何控制的
```
→ ACE MCP会找到所有LED相关的代码文件、控制函数、配置等

### **场景2：功能定位**
当你需要修改某个特定功能但不知道在哪里时：
```
搜索WebSocket消息处理的实现代码
```
→ ACE MCP会定位到具体的处理函数和逻辑

### **场景3：架构分析**
当你需要了解项目的整体架构时：
```
搜索所有HAL相关的初始化代码
```
```
查找项目中所有的中断处理函数
```

### **场景4：问题排查**
当出现问题时快速定位相关代码：
```
搜索串口通信相关的错误处理代码
```
```
查找可能导致内存泄漏的代码段
```

### **场景5：代码重构**
重构前需要了解影响范围：
```
搜索所有使用ucLed全局变量的代码
```

## ⚙️ 配置状态说明

### **当前配置状态：✅ 已完成**
- ✅ ACE MCP工具已安装
- ✅ Claude Code集成已配置
- ✅ 文件类型已优化（支持C/C++、汇编等）
- ✅ 排除规则已设置（忽略编译输出、缓存等）

### **唯一需要你做的：配置API令牌**

在 `C:\Users\HP\.acemcp\settings.toml` 文件中：
```toml
# 将这一行：
TOKEN = "your-api-token-here"
# 替换为：
TOKEN = "sk-你的实际API密钥"
```

**API令牌获取方法：**
1. OpenAI官网：https://platform.openai.com/api-keys
2. 或其他兼容的API服务商

## 📋 日常使用检查清单

### **每次使用前（只需检查一次）：**
- [ ] 确保在项目根目录 `C:\Users\HP\Desktop\CIMC_xi` 下使用Claude Code
- [ ] 确认API令牌已配置（如果需要语义搜索功能）

### **使用过程中：**
- [ ] 直接用自然语言描述你的需求
- [ ] 系统会自动返回相关代码和说明
- [ ] 可以根据结果继续深入提问

## 🔍 搜索技巧

### **有效的搜索方式：**
```
✅ 好的搜索：
- "搜索LED控制相关代码"
- "查找4G模块初始化函数"
- "WebSocket消息处理实现"
- "查找所有中断处理程序"

❌ 不好的搜索：
- "LED" (太简单，结果可能不精确)
- "所有代码" (太宽泛)
- "函数名" (不如描述功能效果好)
```

### **搜索优化技巧：**
1. **描述功能而非文件名**：说"LED控制"而不是"led.c"
2. **包含上下文**：说"4G模块的初始化代码"而不是"初始化"
3. **使用技术术语**：说"HAL库配置"、"中断向量"、"DMA传输"等

## 🚨 注意事项

### **需要联网的情况：**
- 如果配置了远程API（如OpenAI），需要联网
- 如果使用本地API，则不需要联网

### **性能考虑：**
- 首次索引可能需要几分钟（取决于项目大小）
- 后续搜索都是秒级响应
- 索引会自动增量更新，无需手动维护

### **隐私安全：**
- 代码索引存储在本地 `C:\Users\HP\.acemcp\data` 目录
- 如果使用远程API，代码片段会发送到API服务进行处理
- 可以配置本地API来保证代码不外泄

## 🆘 常见问题

### **Q: 每次使用都需要重新配置吗？**
A: **不需要！** 配置一次后，日常直接使用即可。

### **Q: 搜索不到结果怎么办？**
A: 检查：
1. API令牌是否正确配置
2. 网络连接是否正常
3. 搜索描述是否准确

### **Q: 支持哪些编程语言？**
A: 支持所有文本格式，特别优化了C/C++、Python、JavaScript等。

### **Q: 会不会影响编译速度？**
A: **不会！** ACE MCP是独立的索引系统，与编译完全分离。

## 🎉 开始使用

**现在就开始体验：**

1. 在你的项目目录 `C:\Users\HP\Desktop\CIMC_xi` 下
2. 向Claude提问：**"搜索项目中LED控制相关的所有代码"**
3. 体验智能代码搜索的强大功能！

---

**总结：ACE MCP已经配置完成，日常使用就是直接向Claude用自然语言提问，系统会自动搜索你的代码库并给出精确答案。就像给你的代码装上了智能搜索引擎！**